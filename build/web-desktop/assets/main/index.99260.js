System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./telegram-web.ts","./index.ts","./HttpClient.ts"],(function(t){var e,n,i,o,a,s,r,l,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Label,a=t._decorator,s=t.Component},function(t){r=t.TelegramWebApp},function(t){l=t.TonConnectUI,c=t.Address},function(t){u=t.HttpClient}],execute:function(){var h,d,p,g,b,m,f,L,_,I,w,C,y;i._RF.push({},"117edbO4YZJoriXQWLvebhl","GameManager",void 0);const{ccclass:U,property:v}=a;t("GameManager",(h=U("GameManager"),d=v(o),p=v(o),g=v(o),b=v(o),m=v(o),h((_=e((L=class extends s{constructor(){super(...arguments),n(this,"idLbl",_,this),n(this,"nameLbl",I,this),n(this,"addressLbl",w,this),n(this,"connectLbl",C,this),n(this,"initDataLbl",y,this),this.connectUI=null,this._base_url="https://alpha.audiera.fi",this._tg_auth_url="/api/auth/telegram"}onLoad(){console.info("onLoad"),this.initTonConnect(),r.Instance.init().then((t=>{console.info("telegram web app init : ",t.success);var e=r.Instance.getTelegramWebAppInitData();console.info(e),console.info(e.user),e&&e.user&&(this.idLbl.string="Id: "+e.user.id,this.nameLbl.string="UserName: "+e.user.username),this.initDataLbl.string="Init Data: "+decodeURIComponent(r.Instance.getTelegramInitData()),this.tgLogin(r.Instance.getTelegramInitData())}))}start(){}update(t){}onConnect(){this.isConnected()?this.connectUI.disconnect():this.connectUI.openModal()}onShare(){console.info("share "),r.Instance.share("https://t.me/MyTestGame029Bot/TgTest","Invite you to play a very interesting game")}initTonConnect(){this.connectUI=new l({manifestUrl:"https://ton-connect.github.io/demo-dapp-with-wallet/tonconnect-manifest.json"}),this.connectUI.onModalStateChange((t=>{console.log("model state changed! : ",t),this.updateConnect()})),this.connectUI.onStatusChange((t=>{console.log("wallet info status changed : ",t),this.updateConnect()})),this.updateConnect()}isConnected(){return this.connectUI?this.connectUI.connected:(console.error("ton ui not inited!"),!1)}updateConnect(){if(this.isConnected()){const t=this.connectUI.account.address;this.addressLbl.string="Address: "+c.parseRaw(t).toString({testOnly:!1,bounceable:!1}),this.connectLbl.string="Connected"}else this.connectLbl.string="Connect",this.addressLbl.string="Address: "}async tgTestLogin(){try{var t="user="+encodeURIComponent('{"id":1,"first_name":"daniel","last_name":"liu","username":"daniel_liu029"}')+"&auth_date=1&hash=2&signature=3";console.info(t);var e=await u.post(this._base_url,this._tg_auth_url,"application/x-www-form-urlencoded",t);console.info(e.user.token);var n=await u.get(this._base_url,"/protected","application/json",null,e.user.token);console.info(n.message)}catch(t){console.error(t)}}async tgLogin(t){try{console.info("tg login: ",t);var e=await u.post(this._base_url,this._tg_auth_url,"application/x-www-form-urlencoded",t);console.info(e.user.token),this.initDataLbl.string="token: "+e.user.token;var n=await u.get(this._base_url,"/api/protected","application/json",null,e.user.token);console.info(n.message)}catch(t){console.error(t),this.initDataLbl.string="error: "+t.toString()}}}).prototype,"idLbl",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(L.prototype,"nameLbl",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(L.prototype,"addressLbl",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(L.prototype,"connectLbl",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(L.prototype,"initDataLbl",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=L))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/HttpClient.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"22ff5UbR0NNAKksBaoUPD1t","HttpClient",void 0);class r{static async request(t,e){try{const r=await fetch(t,e);if(!r.ok)throw new Error(`请求失败: ${r.status} - ${r.statusText}`);return await r.json()}catch(t){throw console.error("网络请求错误:",t),t}}static async get(t,e,n,s,a){const o=new URL(e,t);s&&s.forEach((t=>{let[e,r]=t;o.searchParams.append(e,r)}));var c={"Content-Type":n};return a&&(c.Authorization=`Bearer ${a}`),r.request(o,{method:"GET",headers:c})}static async post(t,e,n,s,a){const o=new URL(e,t);var c={"Content-Type":n};return a&&(c.Authorization=`Bearer ${a}`),r.request(o,{method:"POST",headers:c,body:"application/json"==n?JSON.stringify(s):s})}}t("HttpClient",r),e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./telegram-web.ts","./GameManager.ts","./HttpClient.ts","./ResolutionAdjuster.ts"],(function(){return{setters:[null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ResolutionAdjuster.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,n,s,o,r,h,u,a;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){n=i.cclegacy,s=i.CCInteger,o=i.CCBoolean,r=i._decorator,h=i.Component,u=i.View,a=i.ResolutionPolicy}],execute:function(){var l,g,c,d,f,p,D,b,H,x,W,w,z;n._RF.push({},"b7cf84Lo3lKQaTeZjg7KYPu","ResolutionAdjuster",void 0);const{ccclass:F,property:R}=r;i("ResolutionAdjuster",(l=F("ResolutionAdjuster"),g=R(s),c=R(s),d=R(s),f=R(s),p=R(o),l((H=t((b=class extends h{constructor(){super(...arguments),e(this,"fixedWidthDesignWidth",H,this),e(this,"fixedWidthDesignHeight",x,this),e(this,"fixedHeightDesignWidth",W,this),e(this,"fixedHeightDesignHeight",w,this),e(this,"isAutoFit",z,this)}onLoad(){this.isAutoFit&&(this.autoFit(),window.addEventListener("resize",this.autoFit.bind(this)))}start(){this.isAutoFit&&this.autoFit()}autoFit(){let i=u.instance.getDesignResolutionSize(),t=u.instance.getViewportRect();u.instance.setOrientation,console.log(`viewPortRect = ${t}`);i.height,i.width;let e=Math.abs(t.size.height)/Math.abs(t.size.width);console.log(`rateV = ${e}`),e<1?u.instance.setDesignResolutionSize(this.fixedWidthDesignWidth,this.fixedWidthDesignHeight,a.FIXED_WIDTH):u.instance.setDesignResolutionSize(this.fixedHeightDesignWidth,this.fixedHeightDesignHeight,a.FIXED_HEIGHT)}}).prototype,"fixedWidthDesignWidth",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1280}}),x=t(b.prototype,"fixedWidthDesignHeight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 720}}),W=t(b.prototype,"fixedHeightDesignWidth",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 720}}),w=t(b.prototype,"fixedHeightDesignHeight",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1280}}),z=t(b.prototype,"isAutoFit",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=b))||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/telegram-web.ts",["cc"],(function(e){var t,r,n;return{setters:[function(e){t=e.cclegacy,r=e.sys,n=e._decorator}],execute:function(){var p,o;t._RF.push({},"ebfffcpPmpO2Kop7FNww8J8","telegram-web",void 0);const{ccclass:s,property:i}=n,a=new Promise(((e,t)=>{if(r.platform===r.Platform.MOBILE_BROWSER||r.platform===r.Platform.DESKTOP_BROWSER){const r=document.createElement("script");r.src="https://telegram.org/js/telegram-web-app.js",r.async=!0,r.onload=()=>{const t=setInterval((()=>{window.Telegram&&window.Telegram.WebApp&&(e(window.Telegram.WebApp),clearInterval(t))}),100)},r.onerror=()=>t(new Error("Unable to load TelegramWebApp SDK, please check logs.")),document.head.appendChild(r)}}));e("TelegramWebApp",s("TelegramWebApp")(((o=class e{constructor(){this._tgWebAppJS=null}static get Instance(){return e._instance||(e._instance=new e),e._instance}async init(){return this._tgWebAppJS=await a,this._tgWebAppJS?Promise.resolve({success:!0}):Promise.resolve({success:!1})}openTelegramLink(e){this._tgWebAppJS?this._tgWebAppJS.openTelegramLink(e):console.error("telegram web app is not inited!")}openLink(e,t){void 0===t&&(t={}),this._tgWebAppJS?this._tgWebAppJS.openLink(e,t):console.error("telegram web app is not inited!")}share(e,t){const r="https://t.me/share/url?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(t||"");this.openTelegramLink(r)}shareToStory(e,t,r,n){if(!this._tgWebAppJS)return void console.error("telegram web app is not inited!");const p={text:t,widget_link:{url:r,name:n}};this._tgWebAppJS.shareToStory(e,p)}getTelegramWebApp(){return this._tgWebAppJS}getTelegramWebAppInitData(){return this._tgWebAppJS?this._tgWebAppJS.initDataUnsafe:(console.error("telegram web app is not inited!"),null)}getTelegramUser(){return this._tgWebAppJS?this._tgWebAppJS.initDataUnsafe.user:(console.error("telegram web app is not inited!"),null)}getTelegramInitData(){return this._tgWebAppJS?this._tgWebAppJS.initData:(console.error("telegram web app is not inited!"),null)}openInvoice(e,t){if(!this._tgWebAppJS)return console.error("telegram web app is not inited!"),null;this._tgWebAppJS.openInvoice(e,t)}alert(e){this._tgWebAppJS.showAlert(e)}})._instance=void 0,p=o))||p);t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map